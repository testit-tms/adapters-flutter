# Chapter 3: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–≥–∞–º–∏ —Ç–µ—Å—Ç–∞


–í [–ø—Ä–µ–¥—ã–¥—É—â–µ–π –≥–ª–∞–≤–µ](02_—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ_–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π_.md) –º—ã –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ –Ω–∞—à –∞–¥–∞–ø—Ç–µ—Ä, —É–∫–∞–∑–∞–≤ –µ–º—É –∞–¥—Ä–µ—Å Test IT –∏ –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞. –¢–µ–ø–µ—Ä—å –æ–Ω –≥–æ—Ç–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤. –ù–æ —á—Ç–æ –µ—Å–ª–∏ —Å–∞–º —Ç–µ—Å—Ç –¥–æ–≤–æ–ª—å–Ω–æ —Å–ª–æ–∂–Ω—ã–π –∏ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —ç—Ç–∞–ø–æ–≤? –ü—Ä–æ—Å—Ç–æ —É–≤–∏–¥–µ—Ç—å "–ü—Ä–æ–π–¥–µ–Ω" –∏–ª–∏ "–ü—Ä–æ–≤–∞–ª–µ–Ω" –¥–ª—è –≤—Å–µ–≥–æ —Ç–µ—Å—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ. –•–æ—Ç–µ–ª–æ—Å—å –±—ã –ø–æ–Ω–∏–º–∞—Ç—å, *–∫–∞–∫–∞—è –∏–º–µ–Ω–Ω–æ —á–∞—Å—Ç—å* —Ç–µ—Å—Ç–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ, –∞ –∫–∞–∫–∞—è –ø—Ä–∏–≤–µ–ª–∞ –∫ –æ—à–∏–±–∫–µ.

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã –ø–µ—á–µ—Ç–µ –ø–∏—Ä–æ–≥ –ø–æ —Å–ª–æ–∂–Ω–æ–º—É —Ä–µ—Ü–µ–ø—Ç—É. –ï—Å–ª–∏ –ø–∏—Ä–æ–≥ –Ω–µ –ø–æ–ª—É—á–∏–ª—Å—è, –≤–∞–º –≤–∞–∂–Ω–æ –∑–Ω–∞—Ç—å, –Ω–∞ –∫–∞–∫–æ–º —à–∞–≥–µ –≤—ã –æ—à–∏–±–ª–∏—Å—å: –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–º–µ—à–∞–ª–∏ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã, –ø–µ—Ä–µ–¥–µ—Ä–∂–∞–ª–∏ –≤ –¥—É—Ö–æ–≤–∫–µ –∏–ª–∏ —á—Ç–æ-—Ç–æ –µ—â–µ? –ü—Ä–æ—Å—Ç–æ –∑–Ω–∞—Ç—å, —á—Ç–æ "–ø–∏—Ä–æ–≥ –Ω–µ —É–¥–∞–ª—Å—è", –Ω–µ –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –≤ –±—É–¥—É—â–µ–º. –¢–æ—á–Ω–æ —Ç–∞–∫ –∂–µ –∏ —Å —Ç–µ—Å—Ç–∞–º–∏.

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–≥–∞–º–∏ —Ç–µ—Å—Ç–∞** —Ä–µ—à–∞–µ—Ç –∏–º–µ–Ω–Ω–æ —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `adapters-flutter` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `step`, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–±–∏—Ç—å –≤–∞—à —Ç–µ—Å—Ç –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —á–∞—Å—Ç–∏ (—à–∞–≥–∏) –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ –æ—Ç–¥–µ–ª—å–Ω–æ. –≠—Ç–æ –∫–∞–∫ —Ä–∞–∑–±–∏—Ç—å –≤–∞—à "—Ä–µ—Ü–µ–ø—Ç" (—Ç–µ—Å—Ç) –Ω–∞ –ø—Ä–æ–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—É–Ω–∫—Ç—ã –∏ –æ—Ç–º–µ—á–∞—Ç—å –≥–∞–ª–æ—á–∫–æ–π –∫–∞–∂–¥—ã–π –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –ø—É–Ω–∫—Ç.

## –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å `step`: –î–æ–±–∞–≤–ª—è–µ–º –¥–µ—Ç–∞–ª–∏ –≤ –Ω–∞—à–∏ —Ç–µ—Å—Ç—ã

–§—É–Ω–∫—Ü–∏—è `step` ‚Äî —ç—Ç–æ "–æ–±–µ—Ä—Ç–∫–∞" –¥–ª—è –ª—é–±–æ–≥–æ —É—á–∞—Å—Ç–∫–∞ –∫–æ–¥–∞ –≤–Ω—É—Ç—Ä–∏ –≤–∞—à–µ–≥–æ —Ç–µ—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤—ã–¥–µ–ª–∏—Ç—å –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π —ç—Ç–∞–ø. –û–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–∞:

1.  `title` (String): –ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–≥–∞, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ –æ—Ç—á–µ—Ç–µ Test IT. –°—Ç–∞—Ä–∞–π—Ç–µ—Å—å –¥–∞–≤–∞—Ç—å —à–∞–≥–∞–º –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞.
2.  `body` (Function): –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è (–∏–ª–∏ –æ–±—ã—á–Ω–∞—è), —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ —Ä–∞–º–∫–∞—Ö —ç—Ç–æ–≥–æ —à–∞–≥–∞.

–î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –ø—Ä–∏–º–µ—Ä. –î–æ–ø—É—Å—Ç–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å —Ç–µ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –≤—Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```dart
// –¢–µ—Å—Ç –±–µ–∑ —à–∞–≥–æ–≤
import 'package:adapters_flutter/adapters_flutter.dart';

void main() {
  tmsTest('–¢–µ—Å—Ç –≤—Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', () {
    // 1. –í–≤–æ–¥–∏–º –ª–æ–≥–∏–Ω
    print('–í–≤–æ–¥ –ª–æ–≥–∏–Ω–∞...');
    expect(true, isTrue); // –î–æ–ø—É—Å—Ç–∏–º, —ç—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—è –ª–æ–≥–∏–Ω–∞

    // 2. –í–≤–æ–¥–∏–º –ø–∞—Ä–æ–ª—å
    print('–í–≤–æ–¥ –ø–∞—Ä–æ–ª—è...');
    expect(true, isTrue); // –î–æ–ø—É—Å—Ç–∏–º, —ç—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—è –ø–∞—Ä–æ–ª—è

    // 3. –ù–∞–∂–∏–º–∞–µ–º –∫–Ω–æ–ø–∫—É "–í–æ–π—Ç–∏"
    print('–ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ –í–æ–π—Ç–∏...');
    expect(true, isTrue); // –î–æ–ø—É—Å—Ç–∏–º, —ç—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞
  });
}
```

–ï—Å–ª–∏ —ç—Ç–æ—Ç —Ç–µ—Å—Ç —É–ø–∞–¥–µ—Ç, –º—ã —É–≤–∏–¥–∏–º —Ç–æ–ª—å–∫–æ –æ–±—â—É—é –æ—à–∏–±–∫—É. –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, –Ω–∞ –∫–∞–∫–æ–º —ç—Ç–∞–ø–µ –æ–Ω–∞ –ø—Ä–æ–∏–∑–æ—à–ª–∞. –¢–µ–ø–µ—Ä—å –¥–æ–±–∞–≤–∏–º —à–∞–≥–∏ —Å –ø–æ–º–æ—â—å—é `step`:

```dart
// –¢–µ—Å—Ç —Å —à–∞–≥–∞–º–∏
import 'package:adapters_flutter/adapters_flutter.dart';

void main() {
  tmsTest('–¢–µ—Å—Ç –≤—Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —à–∞–≥–∞–º–∏', () async { // –¢–µ–ª–æ —Ç–µ—Å—Ç–∞ —Ç–µ–ø–µ—Ä—å async
    await step('–í–≤–µ—Å—Ç–∏ –ª–æ–≥–∏–Ω', () { // –ü–µ—Ä–≤—ã–π —à–∞–≥
      print('–í–≤–æ–¥ –ª–æ–≥–∏–Ω–∞...');
      expect(true, isTrue); // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–Ω—É—Ç—Ä–∏ —à–∞–≥–∞
    });

    await step('–í–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å', () { // –í—Ç–æ—Ä–æ–π —à–∞–≥
      print('–í–≤–æ–¥ –ø–∞—Ä–æ–ª—è...');
      expect(true, isTrue);
    });

    await step('–ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–í–æ–π—Ç–∏" –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç', () { // –¢—Ä–µ—Ç–∏–π —à–∞–≥
      print('–ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ –í–æ–π—Ç–∏...');
      expect(true, isTrue);
    });
  });
}
```

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?**
*   –ú—ã –æ–±–µ—Ä–Ω—É–ª–∏ –∫–∞–∂–¥—ã–π –ª–æ–≥–∏—á–µ—Å–∫–∏–π —ç—Ç–∞–ø (–≤–≤–æ–¥ –ª–æ–≥–∏–Ω–∞, –≤–≤–æ–¥ –ø–∞—Ä–æ–ª—è, –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏) –≤ –≤—ã–∑–æ–≤ `await step(...)`. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `await` –∑–¥–µ—Å—å –≤–∞–∂–Ω–æ, –µ—Å–ª–∏ –≤–Ω—É—Ç—Ä–∏ —à–∞–≥–∞ –µ—Å—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (—á—Ç–æ —á–∞—Å—Ç–æ –±—ã–≤–∞–µ—Ç –≤ –≤–∏–¥–∂–µ—Ç-—Ç–µ—Å—Ç–∞—Ö) –∏–ª–∏ –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —à–∞–≥–∏ –≤—ã–ø–æ–ª–Ω—è–ª–∏—Å—å —Å—Ç—Ä–æ–≥–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ.
*   –¢–µ–ø–µ—Ä—å, –µ—Å–ª–∏ —Ç–µ—Å—Ç —É–ø–∞–¥–µ—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ —ç—Ç–∞–ø–µ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è, –∞–¥–∞–ø—Ç–µ—Ä –∑–∞–ø–∏—à–µ—Ç, —á—Ç–æ –ø–µ—Ä–≤—ã–π —à–∞–≥ ("–í–≤–µ—Å—Ç–∏ –ª–æ–≥–∏–Ω") –ø—Ä–æ—à–µ–ª —É—Å–ø–µ—à–Ω–æ, –∞ –≤—Ç–æ—Ä–æ–π —à–∞–≥ ("–í–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å") –ø—Ä–æ–≤–∞–ª–∏–ª—Å—è. –≠—Ç–∞ –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è –≤ Test IT.
*   –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —Ç–µ–ª–æ `tmsTest` —Ç–µ–ø–µ—Ä—å –ø–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ `async`, –∞ –ø–µ—Ä–µ–¥ `step` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `await`. –≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–ø–æ—Å–æ–± —Ä–∞–±–æ—Ç—ã —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –≤ Dart.

## –í–ª–æ–∂–µ–Ω–Ω—ã–µ —à–∞–≥–∏: –°–æ–∑–¥–∞–µ–º –∏–µ—Ä–∞—Ä—Ö–∏—é

–ò–Ω–æ–≥–¥–∞ —à–∞–≥–∏ —Å–∞–º–∏ –ø–æ —Å–µ–±–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω—ã–º–∏ –∏ —Å–æ—Å—Ç–æ—è—Ç—å –∏–∑ –ø–æ–¥–∑–∞–¥–∞—á. –§—É–Ω–∫—Ü–∏—è `step` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —à–∞–≥–∏ ‚Äî —à–∞–≥–∏ –≤–Ω—É—Ç—Ä–∏ –¥—Ä—É–≥–∏—Ö —à–∞–≥–æ–≤. –≠—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø—É–Ω–∫—Ç–æ–≤ –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.

```dart
// –¢–µ—Å—Ç —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ —à–∞–≥–∞–º–∏
import 'package:adapters_flutter/adapters_flutter.dart';

void main() {
  tmsTest('–¢–µ—Å—Ç –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞', () async {
    await step('–®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É', () async { // –ì–ª–∞–≤–Ω—ã–π —à–∞–≥ 1
      await step('–ù–∞–π—Ç–∏ —Ç–æ–≤–∞—Ä "XYZ"', () { // –ü–æ–¥—à–∞–≥ 1.1
        print('–ò—â–µ–º —Ç–æ–≤–∞—Ä XYZ...');
        expect(true, isTrue);
      });
      await step('–ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É"', () { // –ü–æ–¥—à–∞–≥ 1.2
        print('–î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ—Ä–∑–∏–Ω—É...');
        expect(true, isTrue);
      });
    });

    await step('–®–∞–≥ 2: –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é', () { // –ì–ª–∞–≤–Ω—ã–π —à–∞–≥ 2
      print('–ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é...');
      expect(true, isTrue);
    });

    // –ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ —ç—Ç–æ—Ç —à–∞–≥ —É–ø–∞–ª
    await step('–®–∞–≥ 3: –ó–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç–∞–≤–∫–∏', () { // –ì–ª–∞–≤–Ω—ã–π —à–∞–≥ 3
       print('–ó–∞–ø–æ–ª–Ω—è–µ–º –∞–¥—Ä–µ—Å...');
       expect(false, isTrue); // –û—à–∏–±–∫–∞!
    });
  });
}

```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —ç—Ç–æ–≥–æ —Ç–µ—Å—Ç–∞?**
1.  –ê–¥–∞–ø—Ç–µ—Ä –∑–∞–ø–∏—à–µ—Ç, —á—Ç–æ "–®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É" –Ω–∞—á–∞–ª—Å—è.
2.  –ó–∞–ø–∏—à–µ—Ç, —á—Ç–æ –ø–æ–¥—à–∞–≥ "–ù–∞–π—Ç–∏ —Ç–æ–≤–∞—Ä 'XYZ'" –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ.
3.  –ó–∞–ø–∏—à–µ—Ç, —á—Ç–æ –ø–æ–¥—à–∞–≥ "–ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É '–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É'" –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ.
4.  –û—Ç–º–µ—Ç–∏—Ç, —á—Ç–æ "–®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É" –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —É—Å–ø–µ—à–Ω–æ (—Ç–∞–∫ –∫–∞–∫ –≤—Å–µ –µ–≥–æ –ø–æ–¥—à–∞–≥–∏ –ø—Ä–æ—à–ª–∏).
5.  –ó–∞–ø–∏—à–µ—Ç, —á—Ç–æ "–®–∞–≥ 2: –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é" –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ.
6.  –ó–∞–ø–∏—à–µ—Ç, —á—Ç–æ "–®–∞–≥ 3: –ó–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç–∞–≤–∫–∏" –Ω–∞—á–∞–ª—Å—è, –Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π.
7.  –í–µ—Å—å —Ç–µ—Å—Ç `tmsTest('–¢–µ—Å—Ç –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞')` –±—É–¥–µ—Ç –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ `Failed`, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–¥–∏–Ω –∏–∑ –µ–≥–æ —à–∞–≥–æ–≤ —É–ø–∞–ª.

–í –æ—Ç—á–µ—Ç–µ Test IT –≤—ã —É–≤–∏–¥–∏—Ç–µ –∫—Ä–∞—Å–∏–≤—É—é –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —à–∞–≥–æ–≤, –≥–¥–µ –±—É–¥–µ—Ç —è—Å–Ω–æ –≤–∏–¥–Ω–æ, –∫–∞–∫–æ–π —à–∞–≥ —É–ø–∞–ª –∏ –∫–∞–∫–∏–µ —à–∞–≥–∏ –≤—ã–ø–æ–ª–Ω—è–ª–∏—Å—å –¥–æ –Ω–µ–≥–æ.

## –®–∞–≥–∏ —Å –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º

–§—É–Ω–∫—Ü–∏—è `step` –º–æ–∂–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥–µ–π—Å—Ç–≤–∏—è, –Ω–æ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–≤–æ–µ–π —Ä–∞–±–æ—Ç—ã. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–¥–Ω–æ–≥–æ —à–∞–≥–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –≤ –¥—Ä—É–≥–æ–º. –¢–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ generic-–ø–∞—Ä–∞–º–µ—Ç—Ä `T` —É —Ñ—É–Ω–∫—Ü–∏–∏ `step<T>`.

```dart
// –¢–µ—Å—Ç —Å —à–∞–≥–æ–º, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ
import 'package:adapters_flutter/adapters_flutter.dart';

void main() {
  tmsTest('–¢–µ—Å—Ç API: –ü–æ–ª—É—á–∏—Ç—å ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', () async {
    // –®–∞–≥, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∞–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    final String? userId = await step<String>('–ü–æ–ª—É—á–∏—Ç—å ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ API', () {
      print('–í—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ API...');
      // –ó–¥–µ—Å—å –±—ã–ª –±—ã —Ä–µ–∞–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ API
      final returnedId = 'user-123';
      expect(returnedId, isNotNull);
      return returnedId; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–π ID
    });

    // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ
    await step('–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–π ID', () {
      print('–ü—Ä–æ–≤–µ—Ä—è–µ–º ID: $userId');
      expect(userId, equals('user-123'));
    });
  });
}
```

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?**
*   –ú—ã —É–∫–∞–∑–∞–ª–∏ `step<String>`, —á—Ç–æ–±—ã –æ–±–æ–∑–Ω–∞—á–∏—Ç—å, —á—Ç–æ –æ–∂–∏–¥–∞–µ–º —Å—Ç—Ä–æ–∫—É –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.
*   –í–Ω—É—Ç—Ä–∏ `body` —à–∞–≥–∞ –º—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ `returnedId` —Å –ø–æ–º–æ—â—å—é `return`.
*   –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `step` –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `userId`.
*   –ï—Å–ª–∏ —à–∞–≥ —É–ø–∞–¥–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–≤–µ—Ä–∫–∞ `expect` –Ω–µ –ø—Ä–æ–π–¥–µ—Ç –∏–ª–∏ –≤ `body` –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ), `step` –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç –æ—à–∏–±–∫—É, –ø–æ–º–µ—Ç–∏—Ç —à–∞–≥ –∫–∞–∫ `Failed` –∏ –ø—Ä–æ–±—Ä–æ—Å–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–∞–ª—å—à–µ (–∏–ª–∏ –≤–µ—Ä–Ω–µ—Ç `null`, –µ—Å–ª–∏ —Ç–∏–ø –¥–æ–ø—É—Å–∫–∞–µ—Ç `null`).

## –ö–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –≤ Test IT?

–ö–æ–≥–¥–∞ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `step` –∏ `tmsTest` / `tmsTestWidgets`, –∞–¥–∞–ø—Ç–µ—Ä —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞–∂–¥–æ–º —à–∞–≥–µ:
*   –ù–∞–∑–≤–∞–Ω–∏–µ (`title`)
*   –û–ø–∏—Å–∞–Ω–∏–µ (`description`, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `step`)
*   –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è
*   –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
*   –†–µ–∑—É–ª—å—Ç–∞—Ç (`Passed` –∏–ª–∏ `Failed`)
*   –í–ª–æ–∂–µ–Ω–Ω—ã–µ —à–∞–≥–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)

–í—Å—è —ç—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ Test IT –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç-–ø–æ–∏–Ω—Ç–∞ –≤ –≤–∏–¥–µ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–≥–æ —Å–ø–∏—Å–∫–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—á–µ–Ω—å –Ω–∞–≥–ª—è–¥–Ω–æ –≤–∏–¥–µ—Ç—å —Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–∞.

```
–¢–µ—Å—Ç –≤—Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —à–∞–≥–∞–º–∏ (Passed)
  ‚îî‚îÄ –®–∞–≥: –í–≤–µ—Å—Ç–∏ –ª–æ–≥–∏–Ω (Passed)
  ‚îî‚îÄ –®–∞–≥: –í–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å (Passed)
  ‚îî‚îÄ –®–∞–≥: –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–í–æ–π—Ç–∏" –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç (Passed)

–¢–µ—Å—Ç –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ (Failed)
  ‚îî‚îÄ –®–∞–≥: –®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É (Passed)
  |    ‚îî‚îÄ –®–∞–≥: –ù–∞–π—Ç–∏ —Ç–æ–≤–∞—Ä "XYZ" (Passed)
  |    ‚îî‚îÄ –®–∞–≥: –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É" (Passed)
  ‚îî‚îÄ –®–∞–≥: –®–∞–≥ 2: –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é (Passed)
  ‚îî‚îÄ –®–∞–≥: –®–∞–≥ 3: –ó–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç–∞–≤–∫–∏ (Failed) üí•
```

## –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç "–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º"? –ó–∞–ø–∏—Å—å —à–∞–≥–æ–≤

–ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `step`, –∞–¥–∞–ø—Ç–µ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:

1.  **–ù–∞—á–∞–ª–æ —à–∞–≥–∞:** –ê–¥–∞–ø—Ç–µ—Ä –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –Ω–∞—á–∞–ª—Å—è –Ω–æ–≤—ã–π —à–∞–≥. –û–Ω –Ω–∞—Ö–æ–¥–∏—Ç —Ç–µ–∫—É—â–∏–π –≤—ã–ø–æ–ª–Ω—è—é—â–∏–π—Å—è —Ç–µ—Å—Ç –∏ "–≥–æ—Ç–æ–≤–∏—Ç –º–µ—Å—Ç–æ" –¥–ª—è –∑–∞–ø–∏—Å–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —ç—Ç–æ–º —à–∞–≥–µ. –ï—Å–ª–∏ —ç—Ç–æ –≤–ª–æ–∂–µ–Ω–Ω—ã–π —à–∞–≥, –æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —à–∞–≥ –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π —à–∞–≥ –∫ –Ω–µ–º—É.
2.  **–ó–∞—Å–µ—á–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:** –ó–∞–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —à–∞–≥–∞.
3.  **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞:** –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤–∞—à –∫–æ–¥, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –≤ `body` —Ñ—É–Ω–∫—Ü–∏–∏ `step`.
4.  **–ü–µ—Ä–µ—Ö–≤–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:** –ê–¥–∞–ø—Ç–µ—Ä —Å–ª–µ–¥–∏—Ç –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º:
    *   –ï—Å–ª–∏ –∫–æ–¥ –≤ `body` –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —É—Å–ø–µ—à–Ω–æ, —à–∞–≥ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ `Passed`. –ï—Å–ª–∏ `body` –≤–µ—Ä–Ω—É–ª–æ –∑–Ω–∞—á–µ–Ω–∏–µ, –æ–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è.
    *   –ï—Å–ª–∏ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `body` –ø—Ä–æ–∏–∑–æ—à–ª–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `expect` –ø—Ä–æ–≤–∞–ª–∏–ª—Å—è –∏–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∞ –¥—Ä—É–≥–∞—è –æ—à–∏–±–∫–∞), –∞–¥–∞–ø—Ç–µ—Ä –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —ç—Ç–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –ø–æ–º–µ—á–∞–µ—Ç —à–∞–≥ –∫–∞–∫ `Failed` –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—à–∏–±–∫–µ. –ó–∞—Ç–µ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –¥–∞–ª—å—à–µ, —á—Ç–æ–±—ã –≤–µ—Å—å —Ç–µ—Å—Ç `tmsTest` —Ç–æ–∂–µ –±—ã–ª –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ `Failed`.
5.  **–ó–∞–ø–∏—Å—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:** –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è, –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç (`Passed`/`Failed`), –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –¥—Ä—É–≥–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —à–∞–≥–µ.
6.  **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:** –≠—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —à–∞–≥–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∫–∞–∫ —á–∞—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –æ —Ç–µ–∫—É—â–µ–º —Ç–µ—Å—Ç–µ. –ü–æ–∑–∂–µ, –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ–≥–æ —Ç–µ—Å—Ç–∞, –≤—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–≤–∫–ª—é—á–∞—è –≤—Å–µ —à–∞–≥–∏) –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ Test IT.

–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `step`:

```mermaid
sequenceDiagram
    participant TC as –í–∞—à –¢–µ—Å—Ç–æ–≤—ã–π –ö–æ–¥
    participant SM as StepManager (step —Ñ—É–Ω–∫—Ü–∏—è)
    participant TRS as TestResultStorage (–•—Ä–∞–Ω–∏–ª–∏—â–µ)
    participant Body as –ö–æ–¥ –≤–Ω—É—Ç—Ä–∏ step (body)

    TC->>+SM: –í—ã–∑–≤–∞—Ç—å step('–ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–≥–∞', body)
    SM->>+TRS: –ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π —à–∞–≥ (createEmptyStepAsync)
    TRS-->>-SM: –ú–µ—Å—Ç–æ –¥–ª—è —à–∞–≥–∞ —Å–æ–∑–¥–∞–Ω–æ
    SM->>+Body: –í—ã–ø–æ–ª–Ω–∏—Ç—å body()
    alt –£—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
        Body-->>-SM: –í–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)
        SM->>SM: –û—Ç–º–µ—Ç–∏—Ç—å —à–∞–≥ –∫–∞–∫ Passed
    else –û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
        Body-->>-SM: –í—ã–±—Ä–æ—Å–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
        SM->>SM: –ü–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –û—Ç–º–µ—Ç–∏—Ç—å —à–∞–≥ –∫–∞–∫ Failed
    end
    SM->>+TRS: –ó–∞–ø–∏—Å–∞—Ç—å –¥–µ—Ç–∞–ª–∏ —à–∞–≥–∞ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –≤—Ä–µ–º—è, —Ä–µ–∑—É–ª—å—Ç–∞—Ç) (updateCurrentStepAsync)
    TRS-->>-SM: –î–µ—Ç–∞–ª–∏ —à–∞–≥–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
    alt –£—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
       SM-->>-TC: –í–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —à–∞–≥–∞ (–µ—Å–ª–∏ –±—ã–ª)
    else –û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
       SM-->>-TC: –ü—Ä–æ–±—Ä–æ—Å–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–∞–ª—å—à–µ
    end

```

### –ù–µ–º–Ω–æ–≥–æ –æ –∫–æ–¥–µ

–û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏ `step` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `lib/src/manager/step_manager.dart`.

```dart
// –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∏–∑ lib/src/manager/step_manager.dart

import 'package:adapters_flutter/src/storage/test_result_storage.dart';
// ...–¥—Ä—É–≥–∏–µ –∏–º–ø–æ—Ä—Ç—ã...

/// –í—ã–ø–æ–ª–Ω—è–µ—Ç [body] –∫–∞–∫ —à–∞–≥ —Ç–µ—Å—Ç–∞ —Å [title] –∏ [description].
FutureOr<T?> step<T>(final String title, final FutureOr<T?> Function() body,
    {final String? description}) async {
  T? result; // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ body

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–Ω—É–∂–Ω–æ –ª–∏ –≤–æ–æ–±—â–µ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —à–∞–≥–∏?)
  final config = await createConfigOnceAsync(); // –°–º. –≥–ª–∞–≤—É 2

  // –ï—Å–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Test IT –≤–∫–ª—é—á–µ–Ω–∞
  if ((config.testIt ?? true)) {
    // 1. –ì–æ—Ç–æ–≤–∏–º –º–µ—Å—Ç–æ –¥–ª—è –∑–∞–ø–∏—Å–∏ —à–∞–≥–∞ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
    await createEmptyStepAsync(); // –°–º. –≥–ª–∞–≤—É 5

    // –°–æ–∑–¥–∞–µ–º –ª–æ–∫–∞–ª—å–Ω—É—é –º–æ–¥–µ–ª—å –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —à–∞–≥–µ
    final localStep = AutoTestStepResultsModel();
    final startedOn = DateTime.now(); // –ó–∞—Å–µ–∫–∞–µ–º –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞

    try {
      // 3. –í—ã–ø–æ–ª–Ω—è–µ–º –≤–∞—à –∫–æ–¥
      result = await body.call();
      localStep.outcome = Outcome.passed; // –ï—Å–ª–∏ –Ω–µ—Ç –æ—à–∏–±–æ–∫ - –£—Å–ø–µ—Ö
    } catch (_) {
      // 4. –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞
      localStep.outcome = Outcome.failed; // –ü–æ–º–µ—á–∞–µ–º –∫–∞–∫ –ü—Ä–æ–≤–∞–ª
      rethrow; // –ü—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –¥–∞–ª—å—à–µ, —á—Ç–æ–±—ã —Ç–µ—Å—Ç —É–ø–∞–ª
    } finally {
      // 5. –≠—Ç–æ—Ç –±–ª–æ–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ (—É—Å–ø–µ—Ö –∏–ª–∏ –æ—à–∏–±–∫–∞)
      final completedOn = DateTime.now(); // –ó–∞—Å–µ–∫–∞–µ–º –≤—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è

      // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –æ —à–∞–≥–µ
      localStep.completedOn = completedOn;
      localStep.description = description ?? ''; // –û–ø–∏—Å–∞–Ω–∏–µ (–µ—Å–ª–∏ –µ—Å—Ç—å)
      localStep.duration = completedOn.difference(startedOn).inMilliseconds; // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
      localStep.startedOn = startedOn;
      localStep.title = title; // –ù–∞–∑–≤–∞–Ω–∏–µ

      // 6. –û–±–Ω–æ–≤–ª—è–µ–º/—Å–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ —ç—Ç–æ–≥–æ —à–∞–≥–∞ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
      await updateCurrentStepAsync(localStep); // –°–º. –≥–ª–∞–≤—É 5
    }
  } else {
    // –ï—Å–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∞, –ø—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ–º body
    result = await body.call();
  }

  // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è body (–µ—Å–ª–∏ –æ–Ω –±—ã–ª)
  return result;
}

```

**–ü–æ—è—Å–Ω–µ–Ω–∏–µ:**
*   –§—É–Ω–∫—Ü–∏—è `step` —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é ‚Äì –Ω—É–∂–Ω–æ –ª–∏ –≤–æ–æ–±—â–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å Test IT.
*   `createEmptyStepAsync()` –∏ `updateCurrentStepAsync()` ‚Äì —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ [–•—Ä–∞–Ω–∏–ª–∏—â–µ –∏ –º–æ–¥–µ–ª—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ç–µ—Å—Ç–∞](05_—Ö—Ä–∞–Ω–∏–ª–∏—â–µ_–∏_–º–æ–¥–µ–ª—å_—Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞_—Ç–µ—Å—Ç–∞_.md), –∫–æ—Ç–æ—Ä—ã–µ —É–ø—Ä–∞–≤–ª—è—é—Ç –∑–∞–ø–∏—Å—å—é –¥–∞–Ω–Ω—ã—Ö –æ —à–∞–≥–∞—Ö. `createEmptyStepAsync` –Ω–∞—Ö–æ–¥–∏—Ç —Ç–µ–∫—É—â–∏–π —Ç–µ—Å—Ç (–∏–ª–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —à–∞–≥) –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∫ –Ω–µ–º—É –ø—É—Å—Ç–æ–π "—Å–ª–æ—Ç" –¥–ª—è –Ω–æ–≤–æ–≥–æ —à–∞–≥–∞.
*   –ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`body.call()`) –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞ `try...catch`, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –æ—Ç–ª–æ–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç (—É—Å–ø–µ—Ö –∏–ª–∏ –ø—Ä–æ–≤–∞–ª).
*   –í –±–ª–æ–∫–µ `finally` (–∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞) –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞–ø–∏—Å—å –≤—Å–µ—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —à–∞–≥–∞ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –≤—Ä–µ–º—è, —Ä–µ–∑—É–ª—å—Ç–∞—Ç) —Å –ø–æ–º–æ—â—å—é `updateCurrentStepAsync`.
*   –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, –æ–Ω–∞ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –¥–∞–ª—å—à–µ (`rethrow`), —á—Ç–æ–±—ã —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º —Ç–µ—Å—Ç–æ–≤ Flutter —Ç–æ–∂–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–ª –ø–∞–¥–µ–Ω–∏–µ.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, `step` —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤–∞—à–µ–≥–æ –∫–æ–¥–∞, —Å–æ–±–∏—Ä–∞—è –ø—Ä–∏ —ç—Ç–æ–º –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞ –≤ Test IT.

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í —ç—Ç–æ–π –≥–ª–∞–≤–µ –º—ã –Ω–∞—É—á–∏–ª–∏—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `step` –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –Ω–∞—à–∏—Ö —Ç–µ—Å—Ç–æ–≤ –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —ç—Ç–∞–ø—ã. –ú—ã —É–≤–∏–¥–µ–ª–∏, –∫–∞–∫ —ç—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏ –ø–æ–Ω—è—Ç–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –≤ Test IT, –ø–æ–∫–∞–∑—ã–≤–∞—è –Ω–µ —Ç–æ–ª—å–∫–æ –æ–±—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞, –Ω–æ –∏ —Å—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —à–∞–≥–∞, –≤–∫–ª—é—á–∞—è –≤–ª–æ–∂–µ–Ω–Ω—ã–µ. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—â–∞–µ—Ç –∞–Ω–∞–ª–∏–∑ —É–ø–∞–≤—à–∏—Ö —Ç–µ—Å—Ç–æ–≤ –∏ –æ—Ç–ª–∞–¥–∫—É.

–¢–µ–ø–µ—Ä—å –Ω–∞—à–∏ –æ—Ç—á–µ—Ç—ã —Å–æ–¥–µ—Ä–∂–∞—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —à–∞–≥–æ–≤. –ù–æ –º–æ–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –µ—â–µ –±–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞? –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç –∫ —É–ø–∞–≤—à–µ–º—É —à–∞–≥—É –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å–≤—è–∑–∞–Ω–Ω—É—é –∑–∞–¥–∞—á—É? –î–∞, –º–æ–∂–Ω–æ! –í —Å–ª–µ–¥—É—é—â–µ–π –≥–ª–∞–≤–µ, [–§—É–Ω–∫—Ü–∏–∏ –æ–±–æ–≥–∞—â–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤](04_—Ñ—É–Ω–∫—Ü–∏–∏_–æ–±–æ–≥–∞—â–µ–Ω–∏—è_—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤_.md), –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ –æ—Ç—á–µ—Ç—ã —Å—Å—ã–ª–∫–∏, —Å–æ–æ–±—â–µ–Ω–∏—è –∏ —Ñ–∞–π–ª—ã (–∞—Ç—Ç–∞—á–º–µ–Ω—Ç—ã).

---

Generated by [AI Codebase Knowledge Builder](https://github.com/The-Pocket/Tutorial-Codebase-Knowledge)